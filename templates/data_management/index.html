{% extends 'base.html' %}

{% block content %}
{{ block.super }}
{% if user.is_authenticated %}
<div style="margin-top:1em;margin-bottom:1em;">
  Click <a href="{% url 'get_token' %}">here</a> to create a new token for accessing the REST API or
  click <a href="{% url 'revoke_token' %}">here</a> to revoke an existing token.
</div>
{% endif %}
<div class="card">
  <div class="card-body">
    <h2>Data objects:</h2>
    <ul class="list-group list-group-flush">
      {% for object in objects %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <span>
        <a href="{% url object.name %}">{{ object.display_name | title }}</a>
          <br/><small>{{ object.doc }}</small>
        </span>
        <span class="badge badge-primary badge-pill">Count: {{ object.count }}</span>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
<div class="card">
  <div class="card-body">
    <h2>Issues:</h2>
    <ul class="list-group list-group-flush">
      {% for issue in issues %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <a href="{% url 'issue' issue.pk %}">{{ issue.name | title }}</a>
        <span class="badge badge-warning">Severity: {{ issue.severity }}</span>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
